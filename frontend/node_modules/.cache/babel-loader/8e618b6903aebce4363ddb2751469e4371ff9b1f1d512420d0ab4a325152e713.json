{"ast":null,"code":"var _jsxFileName = \"/Users/kapilshinde/Desktop/Medisync/frontend/src/pages/patient/PaymentPage.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport API from \"../../api/api\";\nimport Navbar from \"../../components/Navbar\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PaymentPage() {\n  _s();\n  const [pending, setPending] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    loadPending();\n  }, []);\n  const loadPending = async () => {\n    try {\n      // patient id is inside JWT → backend reads it\n      const {\n        data\n      } = await API.get(\"/bills/pending/2\"); // <-- we will make dynamic later\n      setPending(data);\n    } catch (err) {\n      setPending({\n        hasPending: false\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const payNow = async () => {\n    try {\n      const {\n        data\n      } = await API.post(\"http://localhost:5005/payment/create-order\", {\n        amount: pending.amount,\n        patientId: \"2\",\n        appointmentId: pending.appointmentId\n      });\n      const options = {\n        key: \"RAZORPAY_KEY_ID\",\n        order_id: data.id,\n        handler: async function (response) {\n          await API.post(\"http://localhost:5005/payment/verify\", response);\n          alert(\"Payment Successful\");\n          loadPending();\n        },\n        theme: {\n          color: \"#0d6efd\"\n        }\n      };\n      const rzp = new window.Razorpay(options);\n      rzp.open();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Payment failed\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Payment Gateway\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }, this), !loading && !(pending !== null && pending !== void 0 && pending.hasPending) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success\",\n        children: \"No payment pending\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), !loading && (pending === null || pending === void 0 ? void 0 : pending.hasPending) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Pending Bill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Amount: \\u20B9\", pending.amount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: payNow,\n          children: \"Pay Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(PaymentPage, \"rq6vwY8yxc0pz31j2hLE4rEO6KU=\");\n_c = PaymentPage;\nexport default PaymentPage;\nvar _c;\n$RefreshReg$(_c, \"PaymentPage\");","map":{"version":3,"names":["useEffect","useState","API","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","PaymentPage","_s","pending","setPending","loading","setLoading","loadPending","data","get","err","hasPending","payNow","post","amount","patientId","appointmentId","options","key","order_id","id","handler","response","alert","theme","color","rzp","window","Razorpay","open","_err$response","_err$response$data","message","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","_c","$RefreshReg$"],"sources":["/Users/kapilshinde/Desktop/Medisync/frontend/src/pages/patient/PaymentPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport API from \"../../api/api\";\nimport Navbar from \"../../components/Navbar\";\n\nfunction PaymentPage() {\n\n  const [pending, setPending] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadPending();\n  }, []);\n\n  const loadPending = async () => {\n    try {\n      // patient id is inside JWT → backend reads it\n      const { data } = await API.get(\"/bills/pending/2\");   // <-- we will make dynamic later\n      setPending(data);\n    } catch (err) {\n      setPending({ hasPending: false });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const payNow = async () => {\n    try {\n\n      const { data } = await API.post(\n        \"http://localhost:5005/payment/create-order\",\n        {\n          amount: pending.amount,\n          patientId: \"2\",\n          appointmentId: pending.appointmentId,\n        }\n      );\n\n      const options = {\n        key: \"RAZORPAY_KEY_ID\",\n\n        order_id: data.id,\n\n        handler: async function (response) {\n\n          await API.post(\n            \"http://localhost:5005/payment/verify\",\n            response\n          );\n\n          alert(\"Payment Successful\");\n\n          loadPending();\n        },\n\n        theme: { color: \"#0d6efd\" },\n      };\n\n      const rzp = new window.Razorpay(options);\n      rzp.open();\n\n    } catch (err) {\n      alert(err.response?.data?.message || \"Payment failed\");\n    }\n  };\n\n  return (\n    <>\n      <Navbar />\n\n      <div className=\"container mt-4\">\n\n        <h3>Payment Gateway</h3>\n\n        {loading && <p>Loading...</p>}\n\n        {!loading && !pending?.hasPending && (\n          <div className=\"alert alert-success\">\n            No payment pending\n          </div>\n        )}\n\n        {!loading && pending?.hasPending && (\n          <div className=\"card p-3\">\n            <h5>Pending Bill</h5>\n\n            <p>Amount: ₹{pending.amount}</p>\n\n            <button\n              className=\"btn btn-primary\"\n              onClick={payNow}\n            >\n              Pay Now\n            </button>\n          </div>\n        )}\n\n      </div>\n    </>\n  );\n}\n\nexport default PaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}